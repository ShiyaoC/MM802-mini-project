[{"/Users/shiyao/Documents/MM/MM802/mini_project/MM802-mini-project/src/index.js":"1","/Users/shiyao/Documents/MM/MM802/mini_project/MM802-mini-project/src/reportWebVitals.js":"2","/Users/shiyao/Documents/MM/MM802/mini_project/MM802-mini-project/src/App.js":"3","/Users/shiyao/Documents/MM/MM802/mini_project/MM802-mini-project/src/components/DatePicker.js":"4","/Users/shiyao/Documents/MM/MM802/mini_project/MM802-mini-project/src/components/Menu.js":"5","/Users/shiyao/Documents/MM/MM802/mini_project/MM802-mini-project/src/components/TopN.js":"6","/Users/shiyao/Documents/MM/MM802/mini_project/MM802-mini-project/src/components/WrappedMap.js":"7"},{"size":500,"mtime":1647484804492,"results":"8","hashOfConfig":"9"},{"size":362,"mtime":1647484804493,"results":"10","hashOfConfig":"9"},{"size":8504,"mtime":1647837405792,"results":"11","hashOfConfig":"9"},{"size":1158,"mtime":1647572569780,"results":"12","hashOfConfig":"9"},{"size":1104,"mtime":1647732586833,"results":"13","hashOfConfig":"9"},{"size":751,"mtime":1647572645789,"results":"14","hashOfConfig":"9"},{"size":817,"mtime":1647821699088,"results":"15","hashOfConfig":"9"},{"filePath":"16","messages":"17","suppressedMessages":"18","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"19"},"m82fmr",{"filePath":"20","messages":"21","suppressedMessages":"22","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"19"},{"filePath":"23","messages":"24","suppressedMessages":"25","errorCount":0,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":"26"},{"filePath":"27","messages":"28","suppressedMessages":"29","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"30","usedDeprecatedRules":"19"},{"filePath":"31","messages":"32","suppressedMessages":"33","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"34","usedDeprecatedRules":"19"},{"filePath":"35","messages":"36","suppressedMessages":"37","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"19"},{"filePath":"38","messages":"39","suppressedMessages":"40","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"42"},"/Users/shiyao/Documents/MM/MM802/mini_project/MM802-mini-project/src/index.js",[],[],["43","44"],"/Users/shiyao/Documents/MM/MM802/mini_project/MM802-mini-project/src/reportWebVitals.js",[],[],"/Users/shiyao/Documents/MM/MM802/mini_project/MM802-mini-project/src/App.js",["45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61"],[],"import React, { useState, useRef, useEffect } from 'react';\nimport DatePicker from \"./components/DatePicker\"\nimport Menu from './components/Menu'\nimport TopN from './components/TopN'\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport { GoogleMap, withScriptjs, withGoogleMap, Marker, InfoWindow, Circle} from \"react-google-maps\";\nimport axios from 'axios'\nimport * as d3 from \"d3\";\nimport { red } from '@material-ui/core/colors';\nimport { count } from 'd3';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport Box from '@mui/material/Box';\n// import Map from \"./components/WrappedMap\"\n// d3 bar chart: https://www.youtube.com/watch?v=hOzKr8H_438\n\n\n// var data = {\"Month\":{\"0\":1,\"1\":2,\"2\":3,\"3\":4,\"4\":5,\"5\":6,\"6\":7,\"7\":8,\"8\":9,\"9\":10,\"10\":11,\"11\":12},\"count\":{\"0\":1137,\"1\":918,\"2\":977,\"3\":1146,\"4\":1360,\"5\":1357,\"6\":1295,\"7\":1149,\"8\":1083,\"9\":1213,\"10\":1065,\"11\":973}};\n\n\nfunction App() {\n  const [selectedStartDate, setSelectedStartDate] = React.useState(new Date());\n  const [selectedEndDate, setSelectedEndDate] = React.useState(new Date());\n  const [value,setValue] = useState(\"\");\n  const [topN,setTopN] = useState(\"\");\n  const [queryResult, setQueryResult] = useState({});\n  const [selectedNeighbourhood, setSelectedNeighbourhood] = useState(null);\n  const [testData, setTestData] = useState([{}]);\n  const [open, setOpen] = React.useState(false);\n  const [data, setData] = React.useState({\"Month\":{\"0\":1,\"1\":2,\"2\":3,\"3\":4,\"4\":5,\"5\":6,\"6\":7,\"7\":8,\"8\":9,\"9\":10,\"10\":11,\"11\":12},\"count\":{\"0\":0,\"1\":0,\"2\":0,\"3\":0,\"4\":0,\"5\":0,\"6\":0,\"7\":0,\"8\":0,\"9\":0,\"10\":0,\"11\":0}}\n  );\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleClick = async () =>{\n    let res = await axios.post('http://localhost:3003/api/', {\n      startDate: selectedStartDate,\n      endDate: selectedEndDate,\n      type: value,\n      topn: parseInt(topN)\n    })\n    // console.log(res)\n    setQueryResult(res)\n    // console.log(queryResult)\n\n    setData(res.data);\n    console.log(\"data update!\")\n    console.log(queryResult.data)\n    console.log(data)\n  \n  }\n\n\n    \n  function Map(){\n    console.log(queryResult)\n    if (queryResult.data == undefined || queryResult.data.Month != undefined) {\n      console.log(\"undefined!!!\")\n      return (<GoogleMap defaultZoom={10} defaultCenter={{lat: 53.544388, lng:-113.490929}}/>)\n    }\n    // console.log(typeof queryResult.data[0].ratio)\n\n    return (<GoogleMap defaultZoom={10} defaultCenter={{lat: 53.544388, lng:-113.490929}}>\n      {/* {queryResult.data.map(neighbourhood => (\n          <Marker\n            position={{\n              lat: neighbourhood.Latitude,\n              lng: neighbourhood.Longitude\n            }}\n            onClick={() => {\n              setSelectedNeighbourhood(neighbourhood);\n            }}\n          />\n        ))} */}\n        {selectedNeighbourhood && (\n          <InfoWindow\n            onCloseClick={() => {\n              setSelectedNeighbourhood(null);\n            }}\n            position={{\n              lat: selectedNeighbourhood.Latitude,\n              lng: selectedNeighbourhood.Longitude\n            }}\n          >\n            <div>\n              <h2>{selectedNeighbourhood.Neighbourhood}</h2>\n              <p>{typeof selectedNeighbourhood.ratio == 'undefined' ? \n              <>{\n                <p>total crime count: {selectedNeighbourhood.Count}</p>\n              }\n              </>\n                : \n                <>{\n                  <p>Most frequent crime: {selectedNeighbourhood.type}</p>\n                }</>\n                }</p>\n            </div>\n          </InfoWindow>\n        )}\n        {queryResult.data.map(neighbourhood => (\n          <Circle\n            defaultCenter={{\n              lat: neighbourhood.Latitude,\n              lng: neighbourhood.Longitude\n            }}\n            radius={typeof neighbourhood.ratio == 'undefined' ? neighbourhood.Count : neighbourhood.ratio*5000}\n            onClick={() => {\n              setSelectedNeighbourhood(neighbourhood);\n            }}\n          />\n        ))}\n\n    </GoogleMap>);\n  }\n\n  const WrappedMap = withScriptjs(withGoogleMap(Map));\n  \n  const svgRef = useRef();\n\n  useEffect(() => {\n    if (data.Month != undefined){ \n\n    const xtry = [];\n    for(let i =0; i < Object.keys(data.Month).length;i++){\n      xtry.push(data.count[i]);\n    }\n    const ydata = xtry;\n    const width = 800;\n    const height = 300;\n    const svg = d3.select(svgRef.current)\n      .attr('width',width)\n      .attr('height', height)\n      .style('overflow', 'visible')\n      .style('margin-top','75px')\n      .style('margin-left','75px');\n    \n    svg.selectAll(\"*\").remove()\n\n    svg.append(\"text\")\n      .attr(\"transform\", \"translate(100,0)\")\n      .attr(\"x\", width/4)\n      .attr(\"y\", 50)\n      .attr(\"font-size\", \"24px\")\n      .text(\"Crime in Neighbourhood by Months\")\n\n    // set scaling\n    var xScale = d3.scaleBand().range([0, width]).padding(0.4),\n        yScale = d3.scaleLinear().range([height, 0]);\n\n    var g = svg.append(\"g\")\n        .attr(\"transform\", \"translate(\" + 100 + \",\" + 100 + \")\");\n\n  \n      xScale.domain(ydata.map((val,i) => i));\n      yScale.domain([0, d3.max(ydata)]);\n\n      g.append(\"g\")\n      .attr(\"transform\", \"translate(0,\" + height + \")\")\n      .call(d3.axisBottom(xScale).tickFormat(function(d){return d+1;}))\n      .append(\"text\")\n      .attr(\"y\", height - 250)\n      .attr(\"x\", width/2)\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"stroke\", \"black\")\n      .text(\"Month\");\n\n      g.append(\"g\")\n         .call(d3.axisLeft(yScale).tickFormat(function(d){\n             return d;\n         })\n         .ticks(15))\n         .append(\"text\")\n         .attr(\"transform\", \"rotate(-90)\")\n         .attr(\"x\",0-height/4)\n         .attr(\"dy\", \"-5.1em\")\n         .attr(\"text-anchor\", \"end\")\n         .attr(\"stroke\", \"black\")\n         .text(\"Amount of Crime\");\n\n        g.selectAll(\".bar\")\n         .data(ydata)\n         .enter().append(\"rect\")\n         .attr(\"class\", \"bar\")\n         .attr(\"x\", (v,i) => xScale(i))\n         .attr(\"y\", yScale)\n         .attr(\"width\", xScale.bandwidth())\n         .attr(\"height\", val => height - yScale(val));\n  }} ,[data]);\n\n  // send data from backend to frontend\n  useEffect(()=>{\n    axios.get('http://localhost:3003/members').then(response => {\n      console.log(\"SUCCESS\", response)\n      setTestData(response)\n    }).catch(error => {\n      console.log(error)\n    })\n\n  }, [])\n\n  return (\n    <div className=\"App\">\n      <h1>\n        MM802 mini project\n      </h1>\n\n      <Grid container justifyContent=\"space-around\">\n        <DatePicker \n          setSelectedDate={setSelectedStartDate} \n          selectedDate = {selectedStartDate} \n          label = {\"Start Date\"}/>\n        <DatePicker \n          setSelectedDate={setSelectedEndDate} \n          selectedDate = {selectedEndDate} \n          label = {\"End Date\"}/>\n        <Menu setValue={setValue}/>\n        <TopN setTopN={setTopN}/>\n\n        <Button \n          variant=\"contained\" \n          color=\"primary\" \n          onClick={handleClick}>\n          Search\n        </Button>\n      </Grid>\n\n\n      <div style = {{width:'100vw',height:'50vh',marginTop: 40}} >\n        <Grid >\n          <WrappedMap \n              googleMapURL = {'https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places&key=AIzaSyDviHOxXfm0fv1fbQ3gT0GF81moFw99an4'} \n              loadingElement={<div style={{ height: `100%` }} />}\n              containerElement={<div style={{ height: `400px` }} />}\n              mapElement={<div style={{ height: `100%` }} />}\n            />\n        </Grid>\n      </div>\n\n      <div style = {{width:'100vw',height:'80vh',marginTop: 20, marginBottom: 20}} >\n        { (typeof queryResult.data === 'undefined') ? \n          <p>no chart</p> :\n          <>\n          {\n            typeof queryResult.data.Month === 'undefined' \n            ? <p>No data for bar chart</p> \n            : <> \n              <p> showing bar chart </p>,\n              <svg ref = {svgRef}/>\n            </>\n          }\n          </>\n        }\n\n        {/* <p> retrieve: {JSON.stringify(queryResult.data) } </p> */}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","/Users/shiyao/Documents/MM/MM802/mini_project/MM802-mini-project/src/components/DatePicker.js",["62"],[],"import 'date-fns';\nimport React from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport DateFnsUtils from '@date-io/date-fns';\nimport {\n  MuiPickersUtilsProvider,\n  KeyboardDatePicker,\n} from '@material-ui/pickers';\n\nexport default function DatePicker({selectedDate, setSelectedDate, label}) {\n  // The first commit of Material-UI\n//   const [selectedStartDate, handleDateStartChange] = React.useState(new Date());\n//   const [selectedEndDate, handleDateEndChange] = React.useState(new Date());\n  const handleDateChange = (date) => {\n    setSelectedDate(date);\n    console.log(date);\n  };\n\n  return (\n    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n      {/* <Grid container justifyContent=\"space-around\"> */}\n        <MuiPickersUtilsProvider utils={DateFnsUtils}>\n            <KeyboardDatePicker\n            clearable\n            value={selectedDate}\n            label = {label}\n            placeholder=\"10/10/2020\"\n            onChange={date => handleDateChange(date)}\n            maxDate={new Date()}\n            format=\"MM/dd/yyyy\"\n            />\n\n        </MuiPickersUtilsProvider>\n      {/* </Grid> */}\n    </MuiPickersUtilsProvider>\n  );\n}\n","/Users/shiyao/Documents/MM/MM802/mini_project/MM802-mini-project/src/components/Menu.js",["63"],[],"import React, {useState} from 'react'\nimport {Select, MenuItem, FormControl, InputLabel,makeStyles} from '@material-ui/core'\n\nconst useStyles = makeStyles(theme => ({\n    formControl:{\n        minWidth: 200\n    }\n}));\n\nexport default function Menu({setValue}) {\n  const classes = useStyles();\n\n  const handleChange = e => setValue(e.target.value);\n\n  return (\n    <FormControl className={classes.formControl}>\n        <InputLabel>Crime Type</InputLabel>\n        <Select onChange={handleChange}>\n            <MenuItem value = \"Assault\">Assault</MenuItem>\n            <MenuItem value = \"Break and Enter\">Break and Enter</MenuItem>\n            <MenuItem value = \"Homicide\">Homicide</MenuItem>\n            <MenuItem value = \"Robbery\">Robbery</MenuItem>\n            <MenuItem value = \"Sexual Assaults\">Sexual Assaults</MenuItem>\n            <MenuItem value = \"Theft From Vehicle\">Theft From Vehicle</MenuItem>\n            <MenuItem value = \"Theft Of Vehicle\">Theft Of Vehicle</MenuItem>\n            <MenuItem value = \"Theft Over $5000\">Theft Over $5000</MenuItem>\n        </Select>\n    </FormControl>\n\n  )\n}\n\n","/Users/shiyao/Documents/MM/MM802/mini_project/MM802-mini-project/src/components/TopN.js",[],[],"/Users/shiyao/Documents/MM/MM802/mini_project/MM802-mini-project/src/components/WrappedMap.js",["64","65","66","67"],[],"import React from 'react';\nimport { GoogleMap, withScriptjs, withGoogleMap, Marker, InfoWindow} from \"react-google-maps\";\n\n\nexport default function Map(data){\n\n    // const WrappedMap = withScriptjs(withGoogleMap(Map()));\n\n    return(\n        <GoogleMap defaultZoom={10} defaultCenter={{lat: 53.544388, lng:-113.490929}}/>\n    );\n}\n    //   <GoogleMap\n    //       defaultZoom={10}\n    //       defaultCenter={{ lat: 63.0503, lng: 21.705826}}\n    //     >\n    //       {stationsData.features && stationsData.features.map(station => (\n    //         <Marker \n    //         key={station.properties.PARK_ID}\n    //         position={{\n    //           lat: station.geometry.coordinates[1], \n    //           lng: station.geometry.coordinates[0]\n    //         }}",["68","69"],{"ruleId":"70","replacedBy":"71"},{"ruleId":"72","replacedBy":"73"},{"ruleId":"74","severity":1,"message":"75","line":6,"column":10,"nodeType":"76","messageId":"77","endLine":6,"endColumn":20},{"ruleId":"74","severity":1,"message":"78","line":8,"column":50,"nodeType":"76","messageId":"77","endLine":8,"endColumn":56},{"ruleId":"74","severity":1,"message":"79","line":11,"column":10,"nodeType":"76","messageId":"77","endLine":11,"endColumn":13},{"ruleId":"74","severity":1,"message":"80","line":12,"column":10,"nodeType":"76","messageId":"77","endLine":12,"endColumn":15},{"ruleId":"74","severity":1,"message":"81","line":13,"column":8,"nodeType":"76","messageId":"77","endLine":13,"endColumn":14},{"ruleId":"74","severity":1,"message":"82","line":14,"column":8,"nodeType":"76","messageId":"77","endLine":14,"endColumn":21},{"ruleId":"74","severity":1,"message":"83","line":15,"column":8,"nodeType":"76","messageId":"77","endLine":15,"endColumn":21},{"ruleId":"74","severity":1,"message":"84","line":16,"column":8,"nodeType":"76","messageId":"77","endLine":16,"endColumn":25},{"ruleId":"74","severity":1,"message":"85","line":17,"column":8,"nodeType":"76","messageId":"77","endLine":17,"endColumn":19},{"ruleId":"74","severity":1,"message":"86","line":18,"column":8,"nodeType":"76","messageId":"77","endLine":18,"endColumn":11},{"ruleId":"74","severity":1,"message":"87","line":33,"column":10,"nodeType":"76","messageId":"77","endLine":33,"endColumn":18},{"ruleId":"74","severity":1,"message":"88","line":34,"column":10,"nodeType":"76","messageId":"77","endLine":34,"endColumn":14},{"ruleId":"74","severity":1,"message":"89","line":38,"column":9,"nodeType":"76","messageId":"77","endLine":38,"endColumn":24},{"ruleId":"74","severity":1,"message":"90","line":42,"column":9,"nodeType":"76","messageId":"77","endLine":42,"endColumn":20},{"ruleId":"91","severity":1,"message":"92","line":68,"column":26,"nodeType":"93","messageId":"94","endLine":68,"endColumn":28},{"ruleId":"91","severity":1,"message":"95","line":68,"column":65,"nodeType":"93","messageId":"94","endLine":68,"endColumn":67},{"ruleId":"91","severity":1,"message":"95","line":132,"column":20,"nodeType":"93","messageId":"94","endLine":132,"endColumn":22},{"ruleId":"74","severity":1,"message":"96","line":3,"column":8,"nodeType":"76","messageId":"77","endLine":3,"endColumn":12},{"ruleId":"74","severity":1,"message":"97","line":1,"column":16,"nodeType":"76","messageId":"77","endLine":1,"endColumn":24},{"ruleId":"74","severity":1,"message":"98","line":2,"column":21,"nodeType":"76","messageId":"77","endLine":2,"endColumn":33},{"ruleId":"74","severity":1,"message":"99","line":2,"column":35,"nodeType":"76","messageId":"77","endLine":2,"endColumn":48},{"ruleId":"74","severity":1,"message":"78","line":2,"column":50,"nodeType":"76","messageId":"77","endLine":2,"endColumn":56},{"ruleId":"74","severity":1,"message":"100","line":2,"column":58,"nodeType":"76","messageId":"77","endLine":2,"endColumn":68},{"ruleId":"70","replacedBy":"101"},{"ruleId":"72","replacedBy":"102"},"no-native-reassign",["103"],"no-negated-in-lhs",["104"],"no-unused-vars","'makeStyles' is defined but never used.","Identifier","unusedVar","'Marker' is defined but never used.","'red' is defined but never used.","'count' is defined but never used.","'Dialog' is defined but never used.","'DialogActions' is defined but never used.","'DialogContent' is defined but never used.","'DialogContentText' is defined but never used.","'DialogTitle' is defined but never used.","'Box' is defined but never used.","'testData' is assigned a value but never used.","'open' is assigned a value but never used.","'handleClickOpen' is assigned a value but never used.","'handleClose' is assigned a value but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","Expected '!==' and instead saw '!='.","'Grid' is defined but never used.","'useState' is defined but never used.","'withScriptjs' is defined but never used.","'withGoogleMap' is defined but never used.","'InfoWindow' is defined but never used.",["103"],["104"],"no-global-assign","no-unsafe-negation"]